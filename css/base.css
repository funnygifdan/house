*{box-sizing:border-box}
html,body{margin:0;height:100%;background:#000;color:#eee;font-family:system-ui,sans-serif}
a{color:#fff}
.stage{position:relative;height:100vh;user-select:none;overflow:hidden}
.bg{position:absolute;inset:0}
.bg::before{
  content:"";
  position:absolute;inset:0;
  background: radial-gradient(120% 90% at 50% 20%, #0a0 0%, #030 22%, #010 60%, #000 100%);
  opacity:.65;
}
.step-1{background:linear-gradient(#020,#010)}
.step-2{background:linear-gradient(#031,#020)}
.step-3{background:linear-gradient(#042,#031)}
.fade{animation:fade .45s ease both}
@keyframes fade{from{opacity:0}to{opacity:1}}

.hint{position:absolute;left:50%;bottom:5vh;transform:translateX(-50%);
  padding:.35rem .6rem;background:rgba(0,0,0,.5);border:1px solid #333;border-radius:.4rem;font-size:.9rem}

.door{position:absolute;left:50%;top:48%;transform:translate(-50%,-50%);
  background:transparent;border:none;cursor:pointer;width:min(40vw,360px);height:min(54vh,520px)}
.door-panel{position:absolute;inset:8% 15%;background:linear-gradient(180deg,#210,#100);
  box-shadow:inset 0 0 24px rgba(0,0,0,.8)}
.door-frame{position:absolute;inset:0;border:4px solid #431;border-radius:.4rem;
  box-shadow:0 10px 40px rgba(0,0,0,.8)}
.shake{animation:shake .4s ease}
@keyframes shake{10%,90%{transform:translate(-50%,-50%) translateX(-1px)}
20%,80%{transform:translate(-50%,-50%) translateX(2px)}
30%,50%,70%{transform:translate(-50%,-50%) translateX(-4px)}
40%,60%{transform:translate(-50%,-50%) translateX(4px)}}

.room{position:absolute;inset:0}
.room-bg{position:absolute;inset:0;
  background:
    radial-gradient(140% 100% at 50% -20%, rgba(255,255,255,.08), transparent 60%),
    linear-gradient(180deg,#010,#000 40%,#111 41%,#000 70%);
}
.shelf-label{position:absolute;left:50%;top:8vh;transform:translateX(-50%);opacity:.7;font-size:1rem}
.hotspot{position:absolute;display:inline-block;padding:.5rem .7rem;background:rgba(0,0,0,.55);
  border:1px solid #444;border-radius:.4rem;text-decoration:none;color:#fff;backdrop-filter:blur(4px)}
.hotspot:hover{background:rgba(16,16,16,.7)}

#book-frame-wrap{position:absolute;inset:6vh 6vw;background:#000;border:1px solid #333;border-radius:.6rem;
  box-shadow:0 10px 40px rgba(0,0,0,.7)}
#book-frame{width:100%;height:100%;border:0;border-radius:.6rem}
.close{position:absolute;top:.6rem;right:.6rem;z-index:2;background:#111;border:1px solid #444;color:#eee;
  padding:.2rem .5rem;border-radius:.35rem;cursor:pointer}

.tiny{position:absolute;right:1rem;top:1rem;font-size:.8rem;background:#111;border:1px solid #333;
  color:#eee;padding:.25rem .5rem;border-radius:.35rem;cursor:pointer}
